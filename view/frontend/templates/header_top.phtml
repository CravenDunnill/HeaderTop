<?php
/**
 * @package     CravenDunnill_HeaderTop
 * @var \CravenDunnill\HeaderTop\Block\HeaderTop $block
 */
?>
<?php if ($block->isEnabled()): ?>
	<style>
		.header-top {
			<?= $block->getCustomStyles(); ?>
			display: none;
		}
		
		.header-top a {
			<?= $block->getLinkStyles(); ?>
			text-decoration: none;
			transition: color 0.3s ease;
		}
		
		.header-top a:hover {
			<?= $block->getLinkHoverStyles(); ?>
		}
		
		@media (min-width: 768px) {
			.header-top {
				display: block;
			}
		}
		
		.header-top__container {
			max-width: var(--container-max-width, 1280px);
			margin: 0 auto;
			padding: 0.5rem 1rem;
			display: flex;
			justify-content: space-between;
			align-items: center;
			font-size: 0.8rem;
			font-weight: 200;
		}
		
		.header-top__contact {
			display: flex;
			align-items: center;
			gap: 0.3rem;
		}
		
		.header-top__links {
			display: flex;
			align-items: center;
			gap: 1.5rem;
		}
		
		.header-top__links a {}
	</style>
	
	<div class="header-top">
		<div class="header-top__container">
			<div class="header-top__contact">
				<?= $block->getContactInfo(); ?>
			</div>
			
			<div class="header-top__links">
				<?php foreach ($block->getCustomLinks() as $link): ?>
					<a href="<?= $block->escapeUrl($block->getUrl($link['url'])); ?>" 
					   <?php if (!empty($link['custom_color'])): ?>
					   style="color: <?= $block->escapeHtmlAttr($link['custom_color']); ?>"
					   <?php endif; ?>>
						<?= $block->escapeHtml($link['text']); ?>
					</a>
				<?php endforeach; ?>
			</div>
		</div>
	</div>

	<script type="text/x-magento-init">
	{
		".header-top": {
			"CravenDunnill_HeaderTop/js/header-top": {
				"phoneNumber": "<?= $block->escapeJs($block->getPhoneNumber()); ?>",
				"days": {
					"mon": {
						"enabled": <?= $block->getHelper()->isDayEnabled('mon') ? 'true' : 'false' ?>,
						"openTime": "<?= $block->escapeJs($block->getHelper()->getDayOpenTime('mon')); ?>",
						"closeTime": "<?= $block->escapeJs($block->getHelper()->getDayCloseTime('mon')); ?>"
					},
					"tue": {
						"enabled": <?= $block->getHelper()->isDayEnabled('tue') ? 'true' : 'false' ?>,
						"openTime": "<?= $block->escapeJs($block->getHelper()->getDayOpenTime('tue')); ?>",
						"closeTime": "<?= $block->escapeJs($block->getHelper()->getDayCloseTime('tue')); ?>"
					},
					"wed": {
						"enabled": <?= $block->getHelper()->isDayEnabled('wed') ? 'true' : 'false' ?>,
						"openTime": "<?= $block->escapeJs($block->getHelper()->getDayOpenTime('wed')); ?>",
						"closeTime": "<?= $block->escapeJs($block->getHelper()->getDayCloseTime('wed')); ?>"
					},
					"thu": {
						"enabled": <?= $block->getHelper()->isDayEnabled('thu') ? 'true' : 'false' ?>,
						"openTime": "<?= $block->escapeJs($block->getHelper()->getDayOpenTime('thu')); ?>",
						"closeTime": "<?= $block->escapeJs($block->getHelper()->getDayCloseTime('thu')); ?>"
					},
					"fri": {
						"enabled": <?= $block->getHelper()->isDayEnabled('fri') ? 'true' : 'false' ?>,
						"openTime": "<?= $block->escapeJs($block->getHelper()->getDayOpenTime('fri')); ?>",
						"closeTime": "<?= $block->escapeJs($block->getHelper()->getDayCloseTime('fri')); ?>"
					},
					"sat": {
						"enabled": <?= $block->getHelper()->isDayEnabled('sat') ? 'true' : 'false' ?>,
						"openTime": "<?= $block->escapeJs($block->getHelper()->getDayOpenTime('sat')); ?>",
						"closeTime": "<?= $block->escapeJs($block->getHelper()->getDayCloseTime('sat')); ?>"
					},
					"sun": {
						"enabled": <?= $block->getHelper()->isDayEnabled('sun') ? 'true' : 'false' ?>,
						"openTime": "<?= $block->escapeJs($block->getHelper()->getDayOpenTime('sun')); ?>",
						"closeTime": "<?= $block->escapeJs($block->getHelper()->getDayCloseTime('sun')); ?>"
					}
				}
			}
		}
	}
	</script>
<?php endif; ?>